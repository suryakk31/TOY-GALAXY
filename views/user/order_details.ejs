<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>order_details</title>
    <link rel="stylesheet" href="/css/user/order_details.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <style>



section {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e0e0e0;
}

section:last-child {
    border-bottom: none;
}

h2 {
    font-size: 18px;
    font-weight: 500;
    margin-top: 0;
    margin-bottom: 15px;
    color: #212121;
}

p {
    margin: 8px 0;
    font-size: 14px;
}

strong {
    font-weight: 600;
}

.status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    position: relative;
}

.status-item {
    position: relative;
    width: 16.6%;
    text-align: center;
    font-size: 12px;
    color: #aaa;
}

.status-item .status-round {
    width: 15px;
    height: 15px;
    background-color: #ddd;
    border-radius: 50%;
    margin: 0 auto 5px;
}

.status-item.active .status-round {
    background-color: #00aaff;
}

.status-item.active {
    color: #000;
}

.status-bar::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: #ddd;
    z-index: -1;
}

.status-bar .status-item.active ~ .status-item .status-round {
    background-color: #ddd;
}

.status-bar .status-item.active ~ .status-item::before {
    background-color: #ddd;
}

.status-bar .status-item.active::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    height: 3px;
    background-color: #00aaff;
    z-index: -1;
    width: 100%;
}

.status-item:first-child .status-round {
    background-color: #aaa; /* Ensure pending is always visible */
}


/* Order Note Section */
.order-note {
    background-color: #fff9e6;
    border: 1px solid #fff0c0;
    border-radius: 4px;
    padding: 10px;
}

.order-note h2 {
    color: #ff9f00;
}

/* Additional styles to match the image */
.breadcrumb {
    font-size: 12px;
    color: #878787;
    margin-bottom: 20px;
}

.breadcrumb a {
    color: #2874f0;
    text-decoration: none;
}

.rewards {
    background-color: #f5faff;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 10px;
    margin-top: 10px;
}

.rewards h3 {
    font-size: 14px;
    margin: 0 0 5px 0;
}

.rewards p {
    font-size: 12px;
    color: #878787;
    margin: 0;
}

/* Product details */
.product-image {
    width: 60px;
    height: 60px;
    object-fit: contain;
    margin-right: 15px;
}

.product-details {
    display: flex;
    align-items: center;
}

.product-info {
    flex: 1;
}

.price {
    font-weight: bold;
    color: #212121;
}

.offers {
    color: #26a541;
    font-weight: 500;
}
    </style>
</head>
<body>
    
    
<nav class="navbar">
    <ul class="navbar-menu">
      <li><a href="<%= isLoggedIn ? '/auth/homepage' : '/' %>">Home</a></li>
      <li class="dropdown">
        <a href="<%= isLoggedIn ? '/auth/homepage' : '/' %>">Categories</a>
        <ul class="dropdown-menu">
          <% categories.forEach(category => { %>
            <li><a href="/category/<%= category._id %>"><%= category.name %></a></li>
          <% }) %>
        </ul>
      </li>
      <li><a href="<%= isLoggedIn ? '/auth/shop' : '/shop' %>">Shop</a></li>
      <li><a href="<%= isLoggedIn ? '/auth/blog' : '/blog' %>">Blog</a></li>
    </ul>
    <div class="logo">
      <i class='bx bxs-castle'></i><h1>Kids Kastle</h1>
    </div>
    <div class="navbar-right">
      <div class="navbar-search">
        <input type="text" placeholder="Search...">
        <button type="submit"><i class="bx bx-search"></i></button>
      </div>
      <div class="navbar-icons">
        <a href="<%= isLoggedIn ? 'javascript:void(0);' : '/auth/login' %>" id="user-icon"><i class="bx bx-user"></i></a>
        <% if (isLoggedIn && userDatabase) { %>
          <div class="user-info" id="user-info" style="display: none;">
            <a href="/auth/profile"><p>Hello, <%= userDatabase.firstName %></p></a>
            <a href="/auth/logout" id="logout-button">Log out</a>
          </div>
        <% } %>
        <a href="<%= isLoggedIn ? '/auth/wishlist' : '/wishlist' %>"><i class="bx bx-heart"></i></a>
        <a href="<%= isLoggedIn ? '/auth/cart' : '/cart' %>"><i class="bx bx-cart"></i></a>
      </div>
    </div>
  </nav>


  <% if (orders.length > 0) { %>
    <% orders.forEach(order => { %>
        <% order.items.forEach(item => { %>
            <section class="delivery-address">
                <div class="section-header">
                    <h2>Delivery Address</h2>
                    <button class="cancel-button" data-order-id="<%= order._id %>">Cancel</button>
                </div>
                <% if (order.address) { %>
                    <p><strong>Name:</strong> <%= order.address.name %></p>
                    <p><strong>Address:</strong> <%= order.address.address %>, <%= order.address.locality %>, <%= order.address.city %> - <%= order.address.pincode %>, <%= order.address.state %></p>
                    <p><strong>Phone Number:</strong> <%= order.address.phone %> </p>
                <% } else { %>
                    <p>Shipping address information is not available.</p>
                <% } %>
            </section>

            <section class="order-details">
                <h2>Order Details</h2>
                <div class="product-details">
                    <img src="<%= item.productImage[0] %>" alt="Product Image" class="product-image" style="width: 150px; height: auto;">
                    <div class="product-info">
                        <p><strong>Product Name:</strong> <%= item.productName %></p>
                        <p><strong>Description:</strong> <%= item.productDescription %></p>
                        <p><strong>Quantity:</strong> <%= item.quantity %></p>
                        <p><strong>Price:</strong> ₹<%= item.price %> <small>(Discounted price: ₹<%= item.discountPrice %>)</small></p>
                    </div>
                </div>
                <div class="delivery-status">
                  <div class="status-bar">
                      <div class="status-item <%= order.items[0].orderStatus === 'pending' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Pending</span>
                      </div>
                      <div class="status-item <%= order.items[0].orderStatus === 'Order Confirmed' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Order Confirmed</span>
                      </div>
                      <div class="status-item <%= order.items[0].orderStatus === 'Shipped' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Shipped</span>
                      </div>
                      <div class="status-item <%= order.items[0].orderStatus === 'Out for delivery' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Out for Delivery</span>
                      </div>
                      <div class="status-item <%= order.items[0].orderStatus === 'delivered' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Delivered</span>
                      </div>
                      <div class="status-item <%= order.items[0].orderStatus === 'cancelled' ? 'active' : '' %>">
                          <div class="status-round"></div>
                          <span>Cancelled</span>
                      </div>
                  </div>
                  <p><strong>Order Status:</strong> <%= order.items[0].orderStatus ? order.items[0].orderStatus.charAt(0).toUpperCase() + order.items[0].orderStatus.slice(1) : 'Unknown' %></p>
              </div>
              
            </section>
        <% }) %>
    <% }) %>
<% } else { %>
    <p>No orders found.</p>
<% } %>










   <!-- _footer.ejs -->
<footer class="footer">
    <div class="footer-content">
      <div class="footer-section logo-contact">
        <div class="logo">
          <i class='bx bxs-castle'></i><h1>Kids Kastle</h1>
        </div>
        <p>We’re available by phone -123-456-789</p>
        <p>info@example.com</p>
        <p>Monday till Friday 10 to 6 EST</p>
        <div class="social-icons">
          <a href="#"><i class='bx bxl-facebook'></i></a>
          <a href="#"><i class='bx bxl-instagram'></i></a>
          <a href="#"><i class='bx bxl-twitter'></i></a>
        </div>
      </div>
      <div class="footer-section useful-links">
        <h2>Useful links</h2>
        <ul>
          <li><a href="#">How it works</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Babysitters</a></li>
          <li><a href="#">Contact us</a></li>
        </ul>
      </div>
      <div class="footer-section my-account">
        <h2>My account</h2>
        <ul>
          <li><a href="#">Track my order</a></li>
          <li><a href="#">Terms of use</a></li>
          <li><a href="#">Wishlist</a></li>
          <li><a href="#">Submit your feedback</a></li>
        </ul>
      </div>
      <div class="footer-section customer-service">
        <h2>Customer service</h2>
        <ul>
          <li><a href="#">Help & contact us</a></li>
          <li><a href="#">Returns & refunds</a></li>
          <li><a href="#">Online stores</a></li>
          <li><a href="#">Terms & conditions</a></li>
        </ul>
      </div>
    </div>
  </footer>



  
  <script>
    document.getElementById('user-icon').addEventListener('click', function(event) {
      <% if (isLoggedIn) { %>
        event.preventDefault();
        var userInfo = document.getElementById('user-info');
        if (userInfo.style.display === 'none' || userInfo.style.display === '') {
          userInfo.style.display = 'block';
        } else {
          userInfo.style.display = 'none';
        }
      <% } %>
    });

    document.getElementById('logout-button').addEventListener('click', function(event) {
      event.preventDefault();
      Swal.fire({
        title: 'Are you sure you want to logout?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, logout',
        cancelButtonText: 'Cancel'
      }).then((result) => {
        if (result.isConfirmed) {
          window.location.href = '/auth/logout';
        }
      });
    });
  </script>
  



</body>
</html>